schemaVersion: 2.0.0

fileExistenceTests:
  - name: 'PostgreSQL binary'
    path: '/usr/lib/postgresql/*/bin/postgres'
    shouldExist: true

  - name: 'TimescaleDB extension'
    path: '/usr/lib/postgresql/*/lib/timescaledb-*.so'
    shouldExist: true

commandTests:
  - name: 'postgres version'
    command: '/usr/lib/postgresql/*/bin/postgres'
    args: ['--version']
    expectedOutput: ['postgres (PostgreSQL)']

  - name: 'psql available'
    command: '/usr/lib/postgresql/*/bin/psql'
    args: ['--version']
    expectedOutput: ['psql (PostgreSQL)']

metadataTest:
  user: 'postgres'