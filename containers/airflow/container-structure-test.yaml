schemaVersion: 2.0.0

fileExistenceTests:
  - name: 'Requirements file'
    path: '/requirements.txt'
    shouldExist: true

commandTests:
  - name: 'airflow version'
    command: 'airflow'
    args: ['version']
    expectedOutput: ['Apache Airflow']

  - name: 'python version'
    command: 'python'
    args: ['--version']
    expectedOutput: ['Python 3']

  - name: 'pip requirements installed'
    command: 'pip'
    args: ['check']
    exitCode: 0

metadataTest:
  env:
    - key: 'AIRFLOW_HOME'
      value: '/opt/airflow'