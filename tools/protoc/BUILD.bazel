# Create hermetic protoc that all build scripts can use
genrule(
    name = "protoc",
    srcs = ["@protobuf//:protoc"],
    outs = ["protoc"],
    cmd = "cp $(location @protobuf//:protoc) $@ && chmod +x $@",
    executable = True,
    visibility = ["//visibility:public"],
)

# Shell wrapper that sets up environment for hermetic protoc
sh_binary(
    name = "protoc_wrapper",
    srcs = ["protoc_wrapper.sh"],
    data = [":protoc"],
    visibility = ["//visibility:public"],
)